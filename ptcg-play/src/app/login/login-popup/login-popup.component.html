<h2 mat-dialog-title translate>LOGIN_SIGN_IN</h2>

<mat-dialog-content class="ptcg-login-popup-content">

  <mat-progress-bar *ngIf="loading" color="accent" mode="indeterminate" class="ptcg-u-top">
  </mat-progress-bar>

  <form #form="ngForm" (ngSubmit)="login()">

    <!-- Username -->
    <mat-form-field>
      <mat-label translate>LOGIN_USERNAME</mat-label>
      <input matInput name="name" [placeholder]="'LOGIN_USERNAME' | translate" ptcgNameValidator
        [disabled]="loading" [(ngModel)]="name" #nameField="ngModel">
      <mat-error *ngIf="!nameField.pristine && nameField.invalid" translate>
        VALIDATION_INVALID_NAME_FORMAT
      </mat-error>
    </mat-form-field>

    <!-- Password -->
    <mat-form-field>
      <mat-label translate>LOGIN_PASSWORD</mat-label>
      <input type="password" matInput name="password" [placeholder]="'LOGIN_PASSWORD' | translate"
        ptcgPasswordValidator password-min-length="1"
        [disabled]="loading" [(ngModel)]="password" #passwordField="ngModel">
      <mat-error *ngIf="!passwordField.pristine && passwordField.invalid" translate>
        VALIDATION_INVALID_PASSWORD_FORMAT
      </mat-error>
    </mat-form-field>

    <section class="ptcg-game-rule-checkbox">
      <mat-checkbox color="primary" name="remember"
        [disabled]="loading" [(ngModel)]="rememberMe">
        {{ 'LOGIN_REMEMBER_ME' | translate }}
      </mat-checkbox>
    </section>

    <p>
      <button mat-raised-button color="primary" type="submit"
        [disabled]="loading || form.invalid" translate>
        {{ 'LOGIN_SIGN_IN' | translate }}
      </button>
    </p>

  </form>

</mat-dialog-content>

<mat-dialog-actions>
  <div class="mat-small">
    <a class="ptcg-login-popup-link" *ngIf="allowServerChange"
       [class.disabled]="loading" (click)="changeServer()" translate>LOGIN_CHANGE_SERVER</a>
    <a class="ptcg-login-popup-link" (click)="register()" translate>LOGIN_CREATE_ACCOUNT</a>
    <a class="ptcg-login-popup-link" (click)="resetPassword()" translate>LOGIN_RESET_PASSWORD</a>
  </div>
</mat-dialog-actions>

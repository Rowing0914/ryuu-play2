<ptcg-content [loading]="loading" class="ptcg-u-padding">

  <h1 class="mat-h1" translate>
    SET_PASSWORD_TITLE
  </h1>

  <div class="ptcg-set-new-password-form">
    <!-- Form card -->
    <mat-card>

      <mat-card-content>
        <form #form="ngForm" autocomplete="off">

          <!-- New password -->
          <mat-form-field>
            <mat-label translate>SET_PASSWORD_NEW</mat-label>
            <input type="password" matInput [placeholder]="'SET_PASSWORD_NEW' | translate" name="new-password"
              [(ngModel)]="newPassword" [disabled]="loading" #newPasswordField="ngModel"
              ptcgPasswordValidator required maxlength="32">
            <mat-hint translate>
              SET_PASSWORD_NEW_HINT
            </mat-hint>
            <mat-error>
              <div *ngIf="newPasswordField.errors?.password" translate>VALIDATION_INVALID_PASSWORD_FORMAT</div>
            </mat-error>
          </mat-form-field>

          <!-- Confirm Password -->
          <mat-form-field>
            <mat-label translate>SET_PASSWORD_CONFIRM</mat-label>
            <input type="password" matInput [placeholder]="'SET_PASSWORD_CONFIRM' | translate" name="confirmPassword"
              [(ngModel)]="confirmPassword" [disabled]="loading" #confirmPasswordField="ngModel"
              [ptcgPasswordMatchValidator]="newPassword" required maxlength="32">
            <mat-hint translate>
              SET_PASSWORD_CONFIRM_HINT
            </mat-hint>
            <mat-error>
              <div *ngIf="confirmPasswordField.errors?.passwordMatch" translate>VALIDATION_PASSWORD_MATCH</div>
            </mat-error>
          </mat-form-field>

        </form>
      </mat-card-content>
    </mat-card>

    <p>
      <button mat-raised-button color="primary"
        [disabled]="loading || form.invalid"
        [ngClass]="{'ptcg-u-loading': loading}"
        (click)="changePassword()">
        {{ 'SET_PASSWORD_BUTTON' | translate }}
      </button>
    </p>

  </div>

</ptcg-content>
